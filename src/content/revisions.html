@@include('../_includes/html-head.html', {"title": "Vvveb - Revisions","scripts":"", "base_href":"../"})

<body>

<div id="container">
	   
    @@include('../_includes/sidebar.html')

    <div class="main">

		@@include('../_includes/top-header.html')
			
		<div class="actions flex-column flex-md-row mb-0 sticky-top">
			
			<div class="title">
				<h4 class="text-muted my-3">
					<i class="icon-document-text-outline"></i>&ensp;
					<span data-v-type-name>Post</span>
				</h4>
			</div>

				

            <div class="btns">
				<a href="/admin/?module=content/posts" title="Post list" data-v-posts-list-url
					class="btn btn-outline-secondary pe-3">
						<i class="la la-arrow-left"></i><span><span data-v-type-name>Posts</span> <span>list</span></span>
				 </a>


                <button type="submit" href="" data-v-check-permission-save
                        class="btn btn-primary btn-icon ms-1"
						onclick="document.getElementById('action').value ='save';document.getElementById('form').submit();">
                    <i class="icon-create-outline"></i> <span>Save</span> <span data-v-type-name>post</span>
                </button>
            </div>
		</div>		
	
	<div id="content">
	
	<div id=view></div>

	
 
</div>

@@include('../_includes/footer-scripts.html')

<link href="libs/codemirror/lib/codemirror.css" rel="stylesheet"/>
<link href="libs/codemirror/lib/merge.css" rel="stylesheet"/>

<script id="index-js" src="libs/vvveb/index.js"></script>
<script src="libs/codemirror/lib/codemirror.js"></script>
<script src="libs/codemirror/lib/xml.js"></script>
<script src="libs/codemirror/lib/formatting.js"></script>
<script src="libs/codemirror/lib/diff_match_patch.js"></script>
<script src="libs/codemirror/lib/merge.js"></script>
<style>
    .CodeMirror { line-height: 1.2; }
    @media screen and (min-width: 1300px) {
      article { max-width: 1000px; }
      #nav { border-right: 499px solid transparent; }
    }
    span.clicky {
      cursor: pointer;
      background: #d70;
      color: white;
      padding: 0 3px;
      border-radius: 3px;
    }
  </style>

<script>
var value, orig1, orig2, dv, panes = 2, highlight = true, connect = "align", collapse = false;
function initUI() {
  if (value == null) return;
  var target = document.getElementById("view");
  target.innerHTML = "";
  dv = CodeMirror.MergeView(target, {
    value: value,
    origLeft: panes == 3 ? orig1 : null,
    orig: orig2,
    lineNumbers: true,
    mode: "text/html",
    highlightDifferences: highlight,
    connect: connect,
    collapseIdentical: collapse
  });
}

function toggleDifferences() {
  dv.setShowDifferences(highlight = !highlight);
}

window.onload = function() {
  value = document.documentElement.innerHTML;
  orig1 = "<!doctype html>\n\n" + value.replace(/\.\.\//g, "codemirror/").replace("yellow", "orange");
  orig2 = value.replace(/\u003cscript/g, "\u003cscript type=text/javascript ")
    .replace("white", "purple;\n      font: comic sans;\n      text-decoration: underline;\n      height: 15em");
  initUI();
  let d = document.createElement("div"); d.style.cssText = "width: 50px; margin: 7px; height: 14px"; dv.editor().addLineWidget(57, d)
};

function mergeViewHeight(mergeView) {
  function editorHeight(editor) {
    if (!editor) return 0;
    return editor.getScrollInfo().height;
  }
  return Math.max(editorHeight(mergeView.leftOriginal()),
                  editorHeight(mergeView.editor()),
                  editorHeight(mergeView.rightOriginal()));
}

function resize(mergeView) {
  var height = mergeViewHeight(mergeView);
  for(;;) {
    if (mergeView.leftOriginal())
      mergeView.leftOriginal().setSize(null, height);
    mergeView.editor().setSize(null, height);
    if (mergeView.rightOriginal())
      mergeView.rightOriginal().setSize(null, height);

    var newHeight = mergeViewHeight(mergeView);
    if (newHeight >= height) break;
    else height = newHeight;
  }
  mergeView.wrap.style.height = height + "px";
}
</script>

@@include('../_includes/footer.html')
